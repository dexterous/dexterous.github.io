---
layout: post
title: Here's a thought... ActiveRecord in PL/SQL
---

<div>With all the talk about <a href="http://blogs.ittoolbox.com/bi/confessions/archives/chet-justices-manifesto-of-sorts-18192">putting logic in the DB</a> and hiding SQL behind stored procedures, wouldn't it be really intuitive if <span style="font-weight: bold;">Oracle simply provided a default <a href="http://en.wikipedia.org/wiki/ActiveRecord">ActiveRecord</a> implementation for every table</span> in the DB? So, instead of returning a vanilla record type, <span style="font-weight: bold;">FOO%ROWTYPE</span> would return an <span style="font-style: italic;">Oracle-generated Object type</span> that had accessors/mutators (getters/setters) for all the columns in table <span style="font-weight: bold;">FOO</span> and methods to <span style="font-style: italic;">UpdateRecord</span> and <span style="font-style: italic;">DeleteRecord</span> along with a static method to <span style="font-style: italic;">AddRecord</span>. If you want to avoid any collisions with existing syntax, we could simply have a new attribute- something like <span style="font-weight: bold;">FOO%OBJECTTYPE</span>.</div><div></div><br /><div>My experience shows that most reluctance to encapsulate SQL behind PL/SQL programs stems from the fact that people actually have to write (and subsequently maintain!) that wrapper code. People just <span style="font-style: italic;">don't want to do</span> the donkey work (write the same boilerplate code over-and-over agian for each Table). And personally, I don't think a code generator is very good in this case either. The generated code simply breaks down under maintenance (add/modify/drop column from table).<br /><br />But, what if all that was done by the database?â€“ <span style="font-weight: bold;">CREATE</span> the Object Type when a Table is <span style="font-weight: bold;">CREATE</span>d and propagate changes whenever the table is <span style="font-weight: bold;">ALTER</span>ed; plus maintain the accessors (which could very well enforce the integrity constraints declared on the Table)!</div><br />It'd be a great way for the Oracle community to show some benevolence towards (lowly! :P) application developers who can't write PL/SQL even if their life depended on it, let alone SQL!<br /><br />Also, if you left the &lt;Table&gt;%OBJECTTYPE as NOT FINAL, those who can write PL/SQL could extend it to add even more (business) logic in the database! Whopee and horaay!!!
